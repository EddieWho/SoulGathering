---
title: TripleSnake制作日志
date: 2024-01-23
---

> 最重要的是开始做，而不是想着做

一开始的想法是：为什么贪吃蛇里只有蛇能动而苹果不能动？后来想：如果苹果能动，对于蛇岂不是大劣势？所以得加多一条蛇，这样就是两条蛇VS一个苹果

这个想法其实就转了一天吧，然后我想着“诶为什么不做出来试试呢？”，然后我就试试了。

难点在于怎么处理蛇身子的移动，原理是**让每一个身子向前移动一个位置**，但是需要特殊处理身子的第一个单位，因为它没有前面的位置可以参考，所以就要用头的位置。
而整个蛇其实只有头可以移动，其他的都是从动量，只不过不是父子关系。

处理好这个之后整个贪吃蛇的框架就做好了，但是有一些小的细节还要注意：

1. 蛇身子生成的时候总是会卡到头，一开始我没搞明白为什么，因为代码层面上的身体生成位置我反复检查。是没有问题的；后来洗澡的时候想了一下，发现其实和代码没有多大关系，
而是因为生成的Apple本身带了一个Collider组件，而为了实现吃掉食物这个动作，我一开始用的是OnCollisionEnter这个方法，需要两个蛇头都带刚体，这就导致了在碰撞的一瞬间，
蛇头会被食物撞歪从而向后移动，进而和身体碰撞导致游戏结束；

   然后我就把蛇头的刚体删了，改用OnTriggerEnter检测食物，避免发生真正的碰撞（所以这个OnCollisionEnter到底是谁在用？！）

2. 生成身子的时候我一开始用的是蛇头的朝向的反方向去生成，来达到一个在尾部添加新身子的效果，然后我发现这么做有问题：就是蛇头的朝向并不总是尾巴的反方向（比如蛇头在往上走，而整个蛇成一个L字型）

   解决办法也很简单，就是用尾部的身体和其相邻的一个部位（上一个身子或者头）的位置相减取反，然后归一化，这样就得到了尾巴的朝向
   
3. 最后一个问题还没有解决（但是我觉得我也不是很想解决了哈哈哈哈），就是数值的问题。大体上来说蛇的速度是越吃越慢的，而苹果的移动速度是越被吃越快的，但是这个速度的增长关系我没怎么想清楚，
同时这个游戏的结束部分该判定谁赢谁输也不清楚，但是大体上来说感觉苹果玩家太容易赢了，而两个蛇玩家就比较难赢，不过这些都是数值设计，现在的水平还想不到那些哔哩吧啦的


